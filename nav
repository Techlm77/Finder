#!/bin/bash

# Function to navigate to the found location
navigate_to() {
    local target="$1"
    cd "$target"
    echo "You are now in: $(pwd)"
}

# Function to uninstall nav
uninstall_nav() {
    if [ "$(id -u)" != 0 ]; then
        echo "Uninstallation requires superuser privileges. Please run 'nav --uninstall' with sudo or as root."
        exit 1
    fi
    rm -f /usr/bin/nav
    echo "nav has been uninstalled"
}

# Check command-line arguments
if [ "$1" == "--uninstall" ]; then
    uninstall_nav
else
    # Prompt the user for the search term
    read -p "Enter the file or folder name: " search_term

    # Search for the file or folder starting from the root directory '/'
    result=$(find / -name "$search_term" 2>/dev/null)

    # Check if the search was successful
    if [ -n "$result" ]; then
        echo "Found: $result"
        # Ask the user if they want to navigate to the found location
        read -p "Do you want to navigate to this location? (y/n): " choice
        if [ "$choice" == "y" ] || [ "$choice" == "Y" ]; then
            navigate_to "$(dirname "$result")"
        fi
    else
        echo "File or folder not found."
    fi
fi
